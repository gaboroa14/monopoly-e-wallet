(this["webpackJsonpmonopoly-e-wallet"]=this["webpackJsonpmonopoly-e-wallet"]||[]).push([[0],{102:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var o,a,c,r,i,s,l,u,m=n(1),d=n(32),b=n.n(d),j=n(5),f=n(0),O=function(e){var t=e.text,n=e.color,o=e.action,a=e.size;return Object(f.jsx)("button",{className:"button is-".concat(n," is-").concat(a),onClick:o,children:t})},h=n.p+"static/media/logo.35edb2b5.png",x=function(e){var t=e.mb;return Object(f.jsx)("figure",{className:"image container mb-".concat(t," has-ratio"),width:"400",style:{marginTop:"-2rem"},children:Object(f.jsx)("img",{alt:"Logo de Monopoly",src:h})})},p=function(e){var t=e.name,n=e.onTextChange;return Object(f.jsx)("div",{children:Object(f.jsxs)("label",{className:"is-white is-size-4",style:{letterSpacing:"2px"},children:["Jugador:",Object(f.jsx)("br",{}),Object(f.jsx)("input",{className:"input",value:t,onChange:function(e){return n(e)}})]})})},g=n.p+"static/media/marvel.568d8c62.png",v=n.p+"static/media/kuro.cbe4521a.png",w=function(){return Object(f.jsxs)("div",{className:"level has-text-centered is-mobile mt-6",children:[Object(f.jsx)("div",{className:"level-left mt-6",children:Object(f.jsx)("div",{className:"level-item",children:Object(f.jsx)("img",{src:g,alt:"Logo de MARVEL",className:"image has-ratio",width:"125"})})}),Object(f.jsx)("div",{className:"level-right mt-6",children:Object(f.jsx)("div",{className:"level-item",children:Object(f.jsx)("img",{src:v,alt:"Logo de KuroDev",className:"image has-ratio",width:"67"})})})]})},N=n(2),B=n.n(N),y=n(7),S=n(11),C=n.n(S),E={ENDPOINT:"https://e-wallet-monopoly.herokuapp.com"},k=n(57),I=function(e){var t=e.isLoading;return Object(f.jsx)("div",{className:"box is-centered has-text-centered",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:100,visibility:t?"visible":"hidden"},children:Object(f.jsx)(k.JellyfishSpinner,{loading:t,color:"#7E0000"})})},_=function(){var e,t,n=Object(m.useState)(""),a=Object(j.a)(n,2),c=a[0],r=a[1],i=Object(m.useState)(!1),s=Object(j.a)(i,2),l=s[0],u=s[1],d=Object(y.f)();(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.room.init)&&"bank"===JSON.parse(localStorage.getItem("user")).avatar?d.push("/monopoly-e-wallet/bank"):(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.room.init)&&d.push("/monopoly-e-wallet/game"),Object(m.useEffect)((function(){return o=C()(E.ENDPOINT),function(){o.off()}}),[]),Object(m.useEffect)((function(){o.on("joined",(function(e){B.a.getHtmlContainer()&&(e.quantity>=3&&B.a.enableButtons(),B.a.getHtmlContainer().innerHTML="Esperando jugadores. ".concat(e.quantity," persona").concat(1!==e.quantity?"s":""," se ha").concat(1!==e.quantity?"n":""," unido."))}))}),[]),Object(m.useEffect)((function(){o.on("person-join-left",(function(e){B.a.getHtmlContainer()&&(e.quantity>=3&&B.a.enableButtons(),B.a.getHtmlContainer().innerHTML="Esperando jugadores. ".concat(e.quantity," persona").concat(1!==e.quantity?"s":""," se ha").concat(1!==e.quantity?"n":""," unido."))}))}),[]),Object(m.useEffect)((function(){o.on("room-deleted",(function(){B.a.fire({title:"Se ha cerrado la sala.",confirmButtonText:"Aceptar",confirmButtonColor:"#71945B"}),localStorage.removeItem("user")}))}),[]),Object(m.useEffect)((function(){o.on("game-begun",(function(){var e=JSON.parse(localStorage.getItem("user"));e.room.init=!0,localStorage.setItem("user",JSON.stringify(e)),B.a.close(),d.push("bank"===JSON.parse(localStorage.getItem("user")).avatar?"/monopoly-e-wallet/bank":"/monopoly-e-wallet/game")}))}),[]);var b=function(){return""!==c||(B.a.fire({title:"\xa1Debes introducir un nombre!",confirmButtonText:"Aceptar",confirmButtonColor:"#71945B"}),u(!1),!1)};return Object(f.jsx)("section",{className:"section is-centered has-background-danger is-large is-fullheight",style:{height:"100% !important"},children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(x,{mb:"6"}),Object(f.jsx)(I,{isLoading:l}),Object(f.jsx)(p,{name:c,onTextChange:function(e){return r(e.target.value)}}),Object(f.jsxs)("div",{className:"buttons is-centered mt-6 mb-6",children:[Object(f.jsx)(O,{text:"Crear",color:"primary",action:function(){u(!0),b()&&o.emit("create-room",c.toUpperCase(),(function(e){var t=e.user;e.quantity,e.error;localStorage.setItem("user",JSON.stringify(t)),u(!1),B.a.fire({title:"El c\xf3digo de la sala es: ".concat(t.room._id),text:"Esperando jugadores. 1 persona se ha unido.",confirmButtonColor:"#71945B",cancelButtonColor:"#B85B28",confirmButtonText:"Comenzar",cancelButtonText:"Cancelar",showCancelButton:!0,showConfirmButton:!0}).then((function(e){e.isConfirmed?B.a.fire({title:"\xbfEst\xe1 seguro que desea comenzar la partida?",confirmButtonColor:"#71945B",denyButtonColor:"#B85B28",confirmButtonText:"S\xed",denyButtonText:"No",showDenyButton:!0}).then((function(e){e.isConfirmed&&o.emit("begin-game",JSON.parse(localStorage.getItem("user")).room._id,(function(e){e&&B.a.fire({title:"Error: ".concat(e),icon:"warning"})}))})):e.isDismissed&&JSON.parse(localStorage.getItem("user"))&&o.emit("delete-room",JSON.parse(localStorage.getItem("user")).room._id)})),B.a.showLoading(B.a.getDenyButton())}))},size:"large"}),Object(f.jsx)(O,{text:"Unirse",color:"link",action:function(){b()&&B.a.fire({title:"Introduzca el c\xf3digo de la sala: ",input:"text",inputAttributes:{value:"ldkj"}}).then((function(e){3!==e.value.length?B.a.fire({title:"Debe introducir un c\xf3digo v\xe1lido",confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"}):(u(!0),o.emit("join",{username:c.toUpperCase(),room_id:e.value},(function(t){var n=t.error,a=t.user,c=t.quantity;u(!1),n?B.a.fire({title:"Error: ".concat(n),confirmButtonText:"Aceptar",icon:"warning",confirmButtonColor:"#71945B"}):(localStorage.setItem("user",JSON.stringify(a)),B.a.fire({title:"El c\xf3digo de la sala es: ".concat(e.value.toUpperCase()),text:"Esperando jugadores. ".concat(c," persona").concat(1!==c?"s":""," se ha").concat(1!==c?"n":""," unido."),denyButtonColor:"#B85B28",denyButtonText:"Cancelar",showDenyButton:!0,showConfirmButton:!1}).then((function(e){e.isDenied&&o.emit("delete-user",a._id,(function(e){localStorage.removeItem("user")}))})),B.a.showLoading())})))}))},size:"large"})]}),Object(f.jsx)(w,{}),Object(f.jsx)("footer",{className:"footer has-background-danger has-text-centered is-fullheight",children:Object(f.jsx)("p",{children:"\xa9KURODev. 2021."})})]})})},T=(n(102),n(15)),J=n(9),q=n(6),z=n(8).FontAwesomeIcon,A=function(e){var t,n=e.username,o=e.avatar,a=e.amount,c=e.action,r=e.gameover,i=e.winner,s=e.winnerScreen;switch(o){case"bank":t=q.j;break;case"cat":t=q.e;break;case"dog":t=q.f;break;case"ship":t=q.n;break;case"car":t=q.d;break;case"university":t=q.o;break;default:t=q.k}return Object(f.jsxs)("div",{onClick:c,className:"card has-text-centered ".concat(!i&&s?"tint":void 0),style:r?{borderStyle:"solid",borderColor:"#C70000",borderWidth:"1em"}:i?{boxShadow:"0 0 0 0.75rem #f9ee23"}:void 0,children:[Object(f.jsx)("header",{className:"card-header is-size-4",children:Object(f.jsx)("div",{className:"card-header-title is-centered",children:Object(f.jsx)("div",{className:"has-background-warning pl-5 pr-5 pt-1 has-text-white",style:{borderRadius:"5px"},children:n})})}),Object(f.jsx)("div",{className:"card-image is-128x128 has-text-black is-size-1",children:Object(f.jsx)(z,{icon:t})}),Object(f.jsx)("footer",{className:"card-footer",children:Object(f.jsx)("p",{className:"card-footer-item has-text-black is-centered",children:a&&0!==a?"\u20a9 ".concat(a):0===a?"\xa1Quebrado!":void 0})})]})},D=function(e){var t=e.players,n=e.winner;return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"columns is-mobile is-centered has-text-centered mt-1 ",children:t.map((function(e,o){return n?e&&(0===o&&"bank"!==e.avatar||1===o||2===o&&"bank"===t[0].avatar)?Object(f.jsx)("div",{className:"column is-6",children:Object(f.jsx)(A,Object(J.a)(Object(J.a)({},e),{},{winner:n===e.username?n:void 0,winnerScreen:!0}))},o):void 0:e&&(0===o&&"bank"!==e.avatar||1===o||2===o&&"bank"===t[0].avatar)?Object(f.jsx)("div",{className:"column is-6",children:Object(f.jsx)(A,Object(J.a)({},e))},o):Object(f.jsx)("div",{})}))}),Object(f.jsx)("div",{className:"columns is-mobile is-half is-centered has-text-centered",children:t.map((function(e,o){return n?2===o&&"bank"!==t[0].avatar||3===o||4===o?Object(f.jsx)("div",{className:"column is-6",children:Object(f.jsx)(A,Object(J.a)(Object(J.a)({},e),{},{winner:n===e.username?n:void 0,winnerScreen:!0}))},o):void 0:2===o&&"bank"!==t[0].avatar||3===o||4===o?Object(f.jsx)("div",{className:"column is-6",children:Object(f.jsx)(A,Object(J.a)({},e))},o):Object(f.jsx)("div",{})}))})]})},L=n(8),P=n(3),F=function(){var e=Object(y.f)(),t=Object(m.useState)(JSON.parse(localStorage.getItem("user"))),n=Object(j.a)(t,2),o=n[0],c=n[1],r=Object(m.useState)([]),i=Object(j.a)(r,2),s=i[0],l=i[1],u=Object(m.useState)(!0),d=Object(j.a)(u,2),b=d[0],O=d[1];o?"bank"===o.avatar&&e.push("/monopoly-e-wallet/bank"):e.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){a=C()(E.ENDPOINT);var e=o;return a.emit("join",{username:e.username,room_id:e.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){a.off()}}),[]);var h=function(){B.a.fire({title:"\xa1Esta persona est\xe1 quebrada!",confirmButtonText:"Esito",confirmButtonColor:"#71945B"})},p=function(e){var t=e.toString()[0],n=e.toString().substr(1).length;return t.concat("0".repeat(n))};Object(m.useEffect)((function(){a.emit("get-users",null===o||void 0===o?void 0:o.room._id,(function(t){if(!t)return localStorage.removeItem("user"),e.push("/monopoly-e-wallet/"),void P.b.info("\xa1Esta partida ha finalizado!");t=t.map((function(e){return{username:e.username,avatar:e.avatar,amount:e.username===o.username?e.amount:"~".concat(p(e.amount)),action:o.username===e.username?g:0===e.amount?h:function(){return v(e.username)}}})),l(t),O(!1)}))}),[]),Object(m.useEffect)((function(){a.on("transaction",(function(e){var t=JSON.parse(localStorage.getItem("user"));e.to_user===t.username&&P.b.dark("".concat(e.username," te ha enviado \u20a9").concat(e.amount)),t.amount+=e.amount,localStorage.setItem("user",JSON.stringify(t))}))}),[]),Object(m.useEffect)((function(){a.on("debit",(function(e){var t=JSON.parse(localStorage.getItem("user"));e.to_user===t.username&&(P.b.dark("El banco te ha cobrado \u20a9".concat(e.amount)),t.amount-=e.amount,localStorage.setItem("user",JSON.stringify(t)))}))}),[]),Object(m.useEffect)((function(){a.on("bankrupted",(function(e){P.b.error("\xa1".concat(e.username," ha quebrado!"))}))}),[]),Object(m.useEffect)((function(){a.on("winner-player",(function(t){e.push("/monopoly-e-wallet/winner/".concat(t.username))}))}),[]),Object(m.useEffect)((function(){a.on("accepted-requests",(function(t){B.a.isVisible()||B.a.fire({title:"El banquero quiere finalizar la partida. \xbfFinalizar?",confirmButtonColor:"#71945B",confirmButtonText:"S\xed",cancelButtonColor:"#B85B28",cancelButtonText:"No",showCancelButton:!0}).then((function(t){t.isConfirmed?(a.emit("end-game",{room_id:o.room._id,request:!0},(function(t){t&&e.push("/monopoly-e-wallet/winner/".concat(t.username))})),B.a.fire({title:"Esperando confirmaci\xf3n.",showConfirmButton:!1,showCancelButton:!1}),B.a.showLoading()):a.emit("end-game",{room_id:o.room._id,request:!1},(function(){}))}))}))}),[]),Object(m.useEffect)((function(){a.on("reject-request",(function(e){B.a.close(),P.b.warn("\xa1Se ha rechazado la solicitud de finalizar la partida!")}))}),[]),Object(m.useEffect)((function(){a.on("users-list",(function(e){c(e.find((function(e){return e._id==o._id}))),localStorage.setItem("user",JSON.stringify(o)),e=e.map((function(e){return{username:e.username,avatar:e.avatar,amount:e.username===o.username?e.amount:"~".concat(p(e.amount)),action:o.username===e.username?g:function(){return v(e.username)}}})),l(e)}))}),[]);var g=function(){B.a.fire({title:0!==o.amount?"Su saldo es \u20a9".concat(o.amount):"Est\xe1s en la quiebra.",confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"})},v=function(t){0!==o.amount?e.push("/monopoly-e-wallet/send/".concat(t)):B.a.fire({title:"\xa1Est\xe1s quebrado! No puedes enviar dinero.",confirmButtonText:"Chale",confirmButtonColor:"#71945B"})};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(x,{}),Object(f.jsx)(I,{isLoading:b}),Object(f.jsx)("div",{style:{visibility:b?"hidden":"visible"},children:Object(f.jsx)(D,{players:s},"0")}),Object(f.jsx)("div",{className:"columns is-mobile is-half is-centered has-text-centered",style:{visibility:b?"hidden":"visible"},children:Object(f.jsx)("div",{className:"column is-12",children:Object(f.jsx)("div",{className:"box is-size-1 has-text-black",onClick:0!==o.amount?function(){return e.push("/monopoly-e-wallet/bankrupt")}:function(){localStorage.removeItem("user"),e.push("/monopoly-e-wallet/")},children:Object(f.jsx)(L.FontAwesomeIcon,{icon:0!==o.amount?q.c:q.h})})})})]})})},H=function(e){var t=e.number,n=e.action;return Object(f.jsx)("div",{className:"column is-4",children:Object(f.jsx)("div",{onClick:function(e){return n(e)},className:"button is-large has-background-warning has-text-white",value:t,children:t})})},U=function(e){var t=e.onKeyPress;return Object(f.jsx)("div",{className:"columns is-mobile is-3 is-centered has-text-centered",children:Object(f.jsxs)("div",{className:"box has-background-success is-centered has-text-centered is-6",children:[Object(f.jsxs)("div",{className:"columns is-mobile  is-centered",children:[Object(f.jsx)(H,{number:"1",action:function(e,n){return t(e,"1")}}),Object(f.jsx)(H,{number:"2",action:function(e,n){return t(e,"2")}}),Object(f.jsx)(H,{number:"3",action:function(e,n){return t(e,"3")}})]}),Object(f.jsxs)("div",{className:"columns is-mobile  ",children:[Object(f.jsx)(H,{number:"4",action:function(e,n){return t(e,"4")}}),Object(f.jsx)(H,{number:"5",action:function(e,n){return t(e,"5")}}),Object(f.jsx)(H,{number:"6",action:function(e,n){return t(e,"6")}})]}),Object(f.jsxs)("div",{className:"columns is-mobile  ",children:[Object(f.jsx)(H,{number:"7",action:function(e,n){return t(e,"7")}}),Object(f.jsx)(H,{number:"8",action:function(e,n){return t(e,"8")}}),Object(f.jsx)(H,{number:"9",action:function(e,n){return t(e,"9")}})]}),Object(f.jsxs)("div",{className:"columns is-mobile  ",children:[Object(f.jsx)(H,{number:".",action:function(e,n){return t(e,".")}}),Object(f.jsx)(H,{number:"0",action:function(e,n){return t(e,"0")}}),Object(f.jsx)(H,{number:"x",action:function(e,n){return t(e,"x")}})]})]})})},R=function(e){var t=e.leftButton,n=e.rightButton;return Object(f.jsxs)("div",{className:"level is-mobile has-text-black mt-4",children:[Object(f.jsx)("div",{className:"level-item",children:t?Object(f.jsx)("div",{className:"level-left",children:Object(f.jsx)(O,{text:t.text,color:"warning",size:"large",action:t.action})}):void 0}),n?Object(f.jsx)("div",{className:"level-item",children:Object(f.jsx)("div",{className:"level-right",children:Object(f.jsx)(O,{text:n.text,color:"link",size:"large",action:n.action})})}):void 0]})},W=(n(56),function(){var e=Object(y.f)(),t=Object(m.useState)(JSON.parse(localStorage.getItem("user"))),n=Object(j.a)(t,2),o=n[0],a=n[1],r=Object(y.g)(),i=r.user,s=r.bank,l=Object(m.useState)(""),u=Object(j.a)(l,2),d=u[0],b=u[1],O=Object(m.useState)(!1),h=Object(j.a)(O,2),p=h[0],g=h[1],v=Object(m.useState)(0),w=Object(j.a)(v,2),N=w[0],C=w[1];o||e.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){c=Object(S.io)(E.ENDPOINT);var e=o;return c.emit("join",{username:e.username,room_id:e.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){c.off()}}),[]),Object(m.useEffect)((function(){c.on("transaction",(function(e){if("bank"===i.avatar)P.b.dark("".concat(e.username," le ha enviado \u20a9").concat(e.amount," a ").concat(e.to_user));else{var t=JSON.parse(localStorage.getItem("user"));e.to_user===t.username&&P.b.dark("".concat(e.username," te ha enviado \u20a9").concat(e.amount)),t.amount+=e.amount,localStorage.setItem("user",JSON.stringify(t)),a(t)}}))}),[]),Object(m.useEffect)((function(){c.on("winner-player",(function(t){e.push("/monopoly-e-wallet/winner/".concat(t.username))}))}),[]),Object(m.useEffect)((function(){c.on("debit",(function(e){var t=JSON.parse(localStorage.getItem("user"));e.to_user===t.username&&(P.b.dark("El banco te ha cobrado \u20a9".concat(e.amount)),t.amount-=e.amount,localStorage.setItem("user",JSON.stringify(t)))}))}),[]),Object(m.useEffect)((function(){c.on("bankrupted",(function(e){P.b.error("\xa1".concat(e.username," ha quebrado!"))}))}),[]),Object(m.useEffect)((function(){c.on("winner-player",(function(t){e.push("/monopoly-e-wallet/winner/".concat(t.username))}))}),[]),Object(m.useEffect)((function(){c.on("accepted-requests",(function(t){B.a.isVisible()||B.a.fire({title:"El banquero quiere finalizar la partida. \xbfFinalizar?",confirmButtonColor:"#71945B",confirmButtonText:"S\xed",cancelButtonColor:"#B85B28",cancelButtonText:"No",showCancelButton:!0}).then((function(t){t.isConfirmed?(c.emit("end-game",{room_id:o.room._id,request:!0},(function(t){t&&e.push("/monopoly-e-wallet/winner/".concat(t))})),B.a.fire({title:"Esperando confirmaci\xf3n.",showConfirmButton:!1,showCancelButton:!1}),B.a.showLoading()):c.emit("end-game",{room_id:o.room._id,request:!1},(function(){}))}))}))}),[]),Object(m.useEffect)((function(){c.on("reject-request",(function(e){B.a.close(),P.b.warn("\xa1Se ha rechazado la solicitud de finalizar la partida!")}))}),[]),Object(m.useEffect)((function(){c.on("reject-request",(function(e){B.a.close(),P.b.warn("\xa1Se ha rechazado la solicitud de finalizar la partida!")}))}),[]);var k=function(e){var t="".concat(d).concat(e);b(t)},I=function(e,t){switch(t){case".":0!==d.length||p?p||(k("."),g(!0)):(k("0."),g(!0));break;case"x":b(""),g(!1),C(0);break;default:p?N<2&&(k(t),C(N+1)):k(t)}},_=function(){return e.push(s?"/monopoly-e-wallet/bank":"/monopoly-e-wallet/game")},T={leftButton:{text:Object(f.jsx)(L.FontAwesomeIcon,{icon:q.b}),action:_},rightButton:{text:Object(f.jsx)(L.FontAwesomeIcon,{icon:q.g}),action:function(){!s&&d>o.amount?P.b.error("Monto insuficiente.",{position:"top-right",autoClose:3500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0}):0!==parseInt(d)?0!==d.length?B.a.fire({title:"\xbfEnviarle \u20a9".concat(d," a ").concat(i,"?"),confirmButtonColor:"#71945B",cancelButtonColor:"#B85B28",confirmButtonText:"S\xed",cancelButtonText:"No",showCancelButton:!0}).then((function(e){e.isConfirmed&&(c.emit("send-transaction",{user_id:o._id,amount:d,room_id:o.room._id,to_user:i}),B.a.fire({title:"Enviaste \u20a9".concat(d," a ").concat(i),confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"}),o.amount-=d,localStorage.setItem("user",JSON.stringify(o)),a(o),setTimeout((function(){return _()}),500))})):P.b.error("Introduzca el monto a enviar",{position:"top-right",autoClose:3500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0}):P.b.error("Introduzca un monto v\xe1lido.",{position:"top-right",autoClose:3500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0})}}};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(x,{mb:"1"}),Object(f.jsxs)("div",{className:"level is-mobile has-text-black",children:[Object(f.jsx)("div",{className:"level-item",children:Object(f.jsxs)("div",{className:"level-left",children:[Object(f.jsx)("strong",{className:"mr-2",children:"Enviando a:"})," ",i]})}),Object(f.jsx)("div",{className:"level-item",children:Object(f.jsxs)("div",{className:"level-right",children:[Object(f.jsx)("strong",{className:"mr-2",children:s?"":"Tu saldo es:"})," ",s?"":"\u20a9".concat(o.amount)]})})]}),Object(f.jsx)("div",{className:"columns is-mobile is-centered is-half mb-3",children:Object(f.jsx)("div",{className:"column is-two-thirds",children:Object(f.jsx)("input",{className:"input is-size-2",value:"\u20a9 ".concat(d),readOnly:!0})})}),Object(f.jsx)(U,{onKeyPress:function(e,t){return I(0,t)}}),Object(f.jsx)(R,Object(J.a)({},T))]})})}),M=function(){var e=Object(m.useState)([]),t=Object(j.a)(e,2),n=t[0],o=t[1],a=Object(m.useState)(!0),c=Object(j.a)(a,2),i=c[0],s=c[1],l=Object(m.useState)(JSON.parse(localStorage.getItem("user"))),u=Object(j.a)(l,2),d=u[0],b=u[1],O=Object(y.f)();d||O.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){return(r=Object(S.io)(E.ENDPOINT)).emit("join",{username:d.username,room_id:d.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){r.off()}}),[]),Object(m.useEffect)((function(){r.on("transaction",(function(e){var t=JSON.parse(localStorage.getItem("user"));e.to_user===t.username&&P.b.dark("".concat(e.username," te ha enviado \u20a9").concat(e.amount)),t.amount+=e.amount,localStorage.setItem("user",JSON.stringify(t)),b(t)}))}),[]),Object(m.useEffect)((function(){r.on("debit",(function(e){var t=JSON.parse(localStorage.getItem("user"));e.to_user===t.username&&(P.b.dark("El banco te ha cobrado \u20a9".concat(e.amount)),t.amount-=e.amount,localStorage.setItem("user",JSON.stringify(t)))}))}),[]),Object(m.useEffect)((function(){r.on("bankrupted",(function(e){P.b.error("\xa1".concat(e.username," ha quebrado!"))}))}),[]),Object(m.useEffect)((function(){r.on("winner-player",(function(e){O.push("/monopoly-e-wallet/winner/".concat(e.username))}))}),[]),Object(m.useEffect)((function(){r.on("accepted-requests",(function(e){B.a.isVisible()||B.a.fire({title:"El banquero quiere finalizar la partida. \xbfFinalizar?",confirmButtonColor:"#71945B",confirmButtonText:"S\xed",cancelButtonColor:"#B85B28",cancelButtonText:"No",showCancelButton:!0}).then((function(e){e.isConfirmed?(r.emit("end-game",{room_id:d.room._id,request:!0},(function(e){e&&O.push("/monopoly-e-wallet/winner/".concat(e.username))})),B.a.fire({title:"Esperando confirmaci\xf3n.",showConfirmButton:!1,showCancelButton:!1}),B.a.showLoading()):r.emit("end-game",{room_id:d.room._id,request:!1},(function(){}))}))}))}),[]),Object(m.useEffect)((function(){r.on("reject-request",(function(e){B.a.close(),P.b.warn("\xa1Se ha rechazado la solicitud de finalizar la partida!")}))}),[]),Object(m.useEffect)((function(){r.emit("get-users",null===d||void 0===d?void 0:d.room._id,(function(e){if(!e)return localStorage.removeItem("user"),O.push("/monopoly-e-wallet/"),void P.b.info("\xa1Esta partida ha finalizado!");e=e.filter((function(e){return e.username!==d.username})).map((function(e){return{username:e.username,avatar:"bank"===e.avatar?"university":e.avatar,action:0!==e.amount||"bank"===e.avatar?function(){return h(e.username)}:function(){return B.a.fire({title:"Esta persona est\xe1 quebrada.",confirmButtonText:"Chale",confirmButtonColor:"#71945B"})}}})),o(e),s(!1)}))}),[]);var h=function(e){B.a.fire({title:"\xbfEst\xe1s seguro que te quebr\xf3 ".concat(e,"?"),confirmButtonColor:"#71945B",cancelButtonColor:"#B85B28",confirmButtonText:"S\xed",cancelButtonText:"No",showCancelButton:!0}).then((function(t){t.isConfirmed&&(r.emit("send-transaction",{user_id:JSON.parse(localStorage.getItem("user"))._id,amount:JSON.parse(localStorage.getItem("user")).amount,room_id:JSON.parse(localStorage.getItem("user")).room._id,to_user:e},(function(e){e&&O.push("/monopoly-e-wallet/winner/".concat(e))})),d.amount=0,localStorage.setItem("user",JSON.stringify(d)),B.a.fire({title:"\xa1Te fuiste a la quiebra!",confirmButtonText:"Chale",confirmButtonColor:"#71945B"}),setTimeout((function(){return O.push("/monopoly-e-wallet/game/",1e3)})))}))},p={leftButton:{text:Object(f.jsx)(L.FontAwesomeIcon,{icon:q.b}),action:function(){return O.push("/monopoly-e-wallet/game/")}}};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container has-text-black has-text-centered",children:[Object(f.jsx)(I,{isLoading:i}),Object(f.jsx)(x,{mb:"2"}),Object(f.jsx)("h1",{class:"title is-3",style:{marginBottom:"-0.5rem"},children:"\xbfQui\xe9n te llev\xf3 a la bancarrota?"}),Object(f.jsxs)("div",{style:{visibility:i?"hidden":"visible"},children:[Object(f.jsx)(D,{players:n}),Object(f.jsx)(R,Object(J.a)({},p))]})]})})},K=function(){var e=Object(m.useState)(!0),t=Object(j.a)(e,2),n=t[0],o=t[1],a=Object(y.f)(),c=JSON.parse(localStorage.getItem("user"));c?"bank"!==c.avatar&&a.push("/monopoly-e-wallet/game"):a.push("/monopoly-e-wallet/");var r=Object(m.useState)([]),s=Object(j.a)(r,2),l=s[0],u=s[1];Object(m.useEffect)((function(){i=Object(S.io)(E.ENDPOINT);var e=JSON.parse(localStorage.getItem("user"));return i.emit("join",{username:e.username,room_id:e.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){i.off()}}),[]),Object(m.useEffect)((function(){i.on("transaction",(function(e){P.b.dark("".concat(e.username," le ha enviado \u20a9").concat(e.amount," a ").concat(e.to_user))}))}),[]),Object(m.useEffect)((function(){i.on("bankrupted",(function(e){P.b.error("\xa1".concat(e.username," ha quebrado!"))}))}),[]),Object(m.useEffect)((function(){i.on("winner-player",(function(e){a.push("/monopoly-e-wallet/winner/".concat(e.username))}))}),[]),Object(m.useEffect)((function(){i.on("reject-request",(function(e){B.a.close(),P.b.warn("\xa1Se ha rechazado la solicitud de finalizar la partida!")}))}),[]);var d=function(){i.emit("get-users",null===c||void 0===c?void 0:c.room._id,(function(e){if(!e)return localStorage.removeItem("user"),a.push("/monopoly-e-wallet/"),void P.b.info("\xa1Esta partida ha finalizado!");e=e.map((function(e){return{username:e.username,avatar:e.avatar,amount:e.amount,action:function(){return b(e.username)}}})),u(e),o(!1)}))};Object(m.useEffect)((function(){d()}),[]),Object(m.useEffect)((function(){i.on("users-list",(function(e){e=e.map((function(e){return{username:e.username,avatar:e.avatar,amount:e.amount,action:0!==e.amount?function(){return b(e.username)}:function(){return B.a.fire({title:"\xa1Este jugador est\xe1 quebrado!",confirmButtonText:"Chale",confirmButtonColor:"#71945B"})}}})),u(e)}))}),[]);var b=function(e){B.a.fire({title:"\xbfQue quieres hacer?",showCloseButton:!0,showDenyButton:!0,showCancelButton:!0,denyButtonColor:"#B85B28",confirmButtonText:"Pass Go",denyButtonText:"Pagar o Cobrar",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed?(i.emit("send-transaction",{user_id:JSON.parse(localStorage.getItem("user"))._id,amount:200,room_id:JSON.parse(localStorage.getItem("user")).room._id,to_user:e}),B.a.fire({title:"Pass Go enviado a ".concat(e),confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"}),d()):t.isDenied&&B.a.fire({title:"Elija una opci\xf3n.",showCloseButton:!0,showCancelButton:!0,showDenyButton:!0,denyButtonColor:"#B85B28",confirmButtonText:"Pagar",denyButtonText:"Cobrar",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed&&h(e),t.isDenied&&O(e)}))}))},O=function(e){a.push("/monopoly-e-wallet/withdraw/".concat(e))},h=function(e){a.push("/monopoly-e-wallet/send/".concat(e,"/t"))},p={leftButton:{text:Object(f.jsx)(L.FontAwesomeIcon,{icon:q.a}),action:function(){a.push("/monopoly-e-wallet/history/")}},rightButton:{text:Object(f.jsx)(L.FontAwesomeIcon,{icon:q.i}),action:function(){B.a.fire({title:"\xbfEst\xe1s seguro de que quieres finalizar?",confirmButtonColor:"#71945B",confirmButtonText:"S\xed",cancelButtonColor:"#B85B28",cancelButtonText:"No",showCancelButton:!0}).then((function(e){e.isConfirmed&&(i.emit("end-game",{room_id:c.room._id,request:!0},(function(){})),B.a.fire({title:"Esperando confirmaci\xf3n.",showConfirmButton:!1,showCancelButton:!1}),B.a.showLoading())}))}}};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(x,{}),Object(f.jsx)(I,{isLoading:n}),Object(f.jsxs)("div",{style:{visibility:n?"hidden":"visible"},children:[Object(f.jsx)(D,{players:l}),Object(f.jsx)(R,Object(J.a)({},p))]})]})})},V=function(){var e=Object(y.f)();JSON.parse(localStorage.getItem("user"))||e.push("/monopoly-e-wallet/");return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container is-centered has-text-centered",children:[Object(f.jsx)(x,{mb:"2"}),Object(f.jsx)("h1",{className:"title is-2",children:"FIN DEL JUEGO"}),Object(f.jsx)("h1",{className:"title is-3",children:"Te quebr\xf3 ANYI"}),Object(f.jsx)(A,{playerName:"ANYI",token:"http://placekitten.com/128/129",amount:"null",gameover:!0}),Object(f.jsx)("button",{className:"button is-rounded is-large mt-5",onClick:function(){e.push("/monopoly-e-wallet/")},children:Object(f.jsx)("span",{className:"icon is-medium",children:Object(f.jsx)(L.FontAwesomeIcon,{icon:q.h})})})]})})},G=function(){var e=Object(y.f)(),t=Object(m.useState)(JSON.parse(localStorage.getItem("user"))),n=Object(j.a)(t,1)[0],o=Object(m.useState)([]),a=Object(j.a)(o,2),c=a[0],r=a[1],i=Object(m.useState)(!0),l=Object(j.a)(i,2),u=l[0],d=l[1],b=Object(y.g)().winner;n||e.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){return B.a.isVisible()&&B.a.close(),(s=Object(S.io)(E.ENDPOINT)).emit("join",{username:n.username,room_id:n.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){s.off()}}),[]),Object(m.useEffect)((function(){s.emit("get-users",null===n||void 0===n?void 0:n.room._id,(function(t){if(!t)return localStorage.removeItem("user"),e.push("/monopoly-e-wallet/"),void P.b.info("\xa1Esta partida ha finalizado!");t=t.map((function(e){return{username:e.username,avatar:e.avatar,amount:e.amount}})),r(t),d(!1)}))}),[]);var O={leftButton:{text:Object(f.jsx)(L.FontAwesomeIcon,{icon:q.h}),action:function(){localStorage.removeItem("user"),e.push("/monopoly-e-wallet/")}}};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container is-centered has-text-centered",children:[Object(f.jsx)(x,{mb:"2"}),Object(f.jsx)(I,{isLoading:u}),Object(f.jsxs)("div",{style:{visibility:u?"hidden":"visible"},children:[Object(f.jsx)("h1",{className:"title is-2",children:"FIN DEL JUEGO"}),Object(f.jsxs)("h1",{className:"title is-3",children:[b," es el ganador"]}),Object(f.jsx)(D,{players:c,winner:b}),Object(f.jsx)(R,Object(J.a)({},O))]})]})})},Q=function(){var e=Object(y.f)(),t=Object(m.useState)(""),n=Object(j.a)(t,2),o=n[0],a=n[1],c=Object(m.useState)(!1),r=Object(j.a)(c,2),i=r[0],s=r[1],u=Object(m.useState)(0),d=Object(j.a)(u,2),b=d[0],O=d[1];JSON.parse(localStorage.getItem("user"))||e.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){l=Object(S.io)(E.ENDPOINT);var e=JSON.parse(localStorage.getItem("user"));return l.emit("join",{username:e.username,room_id:e.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){l.off()}}),[]),Object(m.useEffect)((function(){l.on("transaction",(function(e){P.b.dark("".concat(e.username," le ha enviado \u20a9").concat(e.amount," a ").concat(e.to_user))}))}),[]),Object(m.useEffect)((function(){l.on("bankrupted",(function(e){P.b.error("\xa1".concat(e.username," ha quebrado!"))}))}),[]),Object(m.useEffect)((function(){l.on("winner-player",(function(t){e.push("/monopoly-e-wallet/winner/".concat(t.username))}))}),[]);var h=Object(y.g)().user,p=function(e){var t="".concat(o).concat(e);a(t)},g=function(e,t){switch(t){case".":0!==o.length||i?i||(p("."),s(!0)):(p("0."),s(!0));break;case"x":a(""),s(!1),O(0);break;default:i?b<2&&(p(t),O(b+1)):p(t)}},v=function(){return e.push("/monopoly-e-wallet/bank")},w={leftButton:{text:Object(f.jsx)(L.FontAwesomeIcon,{icon:q.b}),action:v},rightButton:{text:Object(f.jsx)(L.FontAwesomeIcon,{icon:q.m}),action:function(){0!==o.length?B.a.fire({title:"\xbfCobrarle \u20a9".concat(o," a ").concat(h,"?"),confirmButtonColor:"#71945B",cancelButtonColor:"#B85B28",confirmButtonText:"S\xed",cancelButtonText:"No",showCancelButton:!0}).then((function(e){e.isConfirmed&&(l.emit("bank-debit",{user_id:JSON.parse(localStorage.getItem("user"))._id,amount:o,room_id:JSON.parse(localStorage.getItem("user")).room._id,to_user:h}),B.a.fire({title:"Cobraste \u20a9".concat(o," a ").concat(h),confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"}),setTimeout((function(){return v()}),500),v())})):P.b.error("Introduzca el monto a cobrar",{position:"top-right",autoClose:3500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0})}}};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(x,{mb:"1"}),Object(f.jsxs)("div",{className:"level is-mobile has-text-black",children:[Object(f.jsx)("div",{className:"level-item",children:Object(f.jsxs)("div",{className:"level-left",children:[Object(f.jsx)("strong",{className:"mr-2",children:"Cobrando a:"})," ",h]})}),Object(f.jsx)("div",{className:"level-item",children:Object(f.jsxs)("div",{className:"level-right",children:[Object(f.jsxs)("strong",{className:"mr-2",children:["Saldo de ",h,":"]})," \u20a9","1.000"]})})]}),Object(f.jsx)("div",{className:"columns is-mobile is-centered is-half mb-3",children:Object(f.jsx)("div",{className:"column is-two-thirds",children:Object(f.jsx)("input",{className:"input is-size-2 has-text-centered",value:"\u20a9 ".concat(o),readOnly:!0})})}),Object(f.jsx)(U,{onKeyPress:function(e,t){return g(0,t)}}),Object(f.jsx)(R,Object(J.a)({},w))]})})},Y=function(e){var t=e.transactions;return Object(f.jsxs)("table",{className:"table is-small",style:{marginLeft:"auto",marginRight:"auto"},children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Tipo"}),Object(f.jsx)("th",{children:"Envi\xf3"}),Object(f.jsx)("th",{children:"Recibi\xf3"}),Object(f.jsx)("th",{children:"Monto"}),Object(f.jsx)("th",{children:"Hora"})]})}),Object(f.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.type}),Object(f.jsx)("td",{children:e.sender}),Object(f.jsx)("td",{children:e.receiver}),Object(f.jsxs)("td",{children:["\u20a9",e.amount]}),Object(f.jsx)("td",{children:e.hour})]})}))})]})},$=function(){var e=Object(y.f)(),t=Object(m.useState)([]),n=Object(j.a)(t,2),o=n[0],a=n[1],c=Object(m.useState)(!0),r=Object(j.a)(c,2),i=r[0],s=r[1],l=JSON.parse(localStorage.getItem("user"));l?"bank"!==l.avatar&&e.push("/monopoly-e-wallet/game"):e.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){u=Object(S.io)(E.ENDPOINT);var e=JSON.parse(localStorage.getItem("user"));return u.emit("join",{username:e.username,room_id:e.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){u.off()}}),[]),Object(m.useEffect)((function(){u.on("transaction",(function(e){P.b.dark("".concat(e.username," le ha enviado \u20a9").concat(e.amount," a ").concat(e.to_user)),s(!0)}))}),[]),Object(m.useEffect)((function(){u.on("bankrupted",(function(e){P.b.error("\xa1".concat(e.username," ha quebrado!"))})),s(!0)}),[]),Object(m.useEffect)((function(){u.on("winner-player",(function(t){e.push("/monopoly-e-wallet/winner/".concat(t.username))}))}),[]),Object(m.useEffect)((function(){u.emit("get-transactions",l.room._id,(function(e){e=e.map((function(e,t){var n=new Date(e.createdAt),o=(n.getHours()%12).toString(),a=n.getMinutes(),c=1===parseInt(n.getHours()/12)?"pm":"am";return{type:"e"===e.type?"Env\xedo":"Cobro",sender:e.username,receiver:e.to_user,amount:e.amount,hour:"".concat(o,":").concat(a," ").concat(c)}})),a(e),s(!1)}))}),[]);var d={leftButton:{text:Object(f.jsx)(L.FontAwesomeIcon,{icon:q.b}),action:function(){return e.push("/monopoly-e-wallet/bank")}},rightButton:{text:Object(f.jsx)(L.FontAwesomeIcon,{icon:q.l}),action:function(){return B.a.fire({title:"Team MARVEL - I Reto Interno KURODev",text:"Albert Acevedo, Gabriel Roa, Jonathan Calles",icon:"success"})}}};return Object(f.jsx)("section",{className:"section is-centered has-text-centered",children:Object(f.jsxs)("div",{className:"container is-centered has-text-centered",children:[Object(f.jsx)(x,{mb:"0"}),Object(f.jsx)(I,{isLoading:i}),Object(f.jsxs)("div",{className:"is-centered has-text-centered",style:{visibility:i?"hidden":"visible"},children:[Object(f.jsx)(R,Object(J.a)({},d)),Object(f.jsx)(Y,{transactions:o})]})]})})};var X=function(){return Object(f.jsxs)(T.a,{children:[Object(f.jsxs)(y.c,{children:[Object(f.jsx)(y.a,{exact:!0,path:"/monopoly-e-wallet/",children:Object(f.jsx)(_,{})}),Object(f.jsx)(y.a,{path:"/monopoly-e-wallet/game/",children:Object(f.jsx)(F,{})}),Object(f.jsx)(y.a,{path:"/monopoly-e-wallet/send/:user/:bank?",children:Object(f.jsx)(W,{})}),Object(f.jsx)(y.a,{path:"/monopoly-e-wallet/bankrupt/",children:Object(f.jsx)(M,{})}),Object(f.jsx)(y.a,{path:"/monopoly-e-wallet/bank/",children:Object(f.jsx)(K,{})}),Object(f.jsx)(y.a,{path:"/monopoly-e-wallet/gameover/",children:Object(f.jsx)(V,{})}),Object(f.jsx)(y.a,{path:"/monopoly-e-wallet/winner/:winner",children:Object(f.jsx)(G,{})}),Object(f.jsx)(y.a,{path:"/monopoly-e-wallet/withdraw/:user",children:Object(f.jsx)(Q,{})}),Object(f.jsx)(y.a,{path:"/monopoly-e-wallet/history/",children:Object(f.jsx)($,{})})]}),Object(f.jsx)(P.a,{})]})},Z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ee(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}b.a.render(Object(f.jsx)(X,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/monopoly-e-wallet",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/monopoly-e-wallet","/service-worker.js");Z?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ee(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ee(t,e)}))}}()}},[[105,1,2]]]);
//# sourceMappingURL=main.e7cc8817.chunk.js.map