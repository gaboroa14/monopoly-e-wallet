(this["webpackJsonpmonopoly-e-wallet"]=this["webpackJsonpmonopoly-e-wallet"]||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var o,a,c,r,s,i,l,u,m=n(1),d=n(33),j=n.n(d),b=n(5),f=n(0),O=function(e){var t=e.text,n=e.color,o=e.action,a=e.size;return Object(f.jsx)("button",{className:"button is-".concat(n," is-").concat(a),onClick:o,children:t})},h=n.p+"static/media/logo.35edb2b5.png",x=function(e){var t=e.mb;return Object(f.jsx)("figure",{className:"image container mb-".concat(t," has-ratio"),width:"400",style:{marginTop:"-2rem"},children:Object(f.jsx)("img",{alt:"Logo de Monopoly",src:h})})},v=function(e){var t=e.name,n=e.onTextChange;return Object(f.jsx)("div",{children:Object(f.jsxs)("label",{className:"is-white is-size-4",style:{letterSpacing:"2px"},children:["Jugador:",Object(f.jsx)("br",{}),Object(f.jsx)("input",{className:"input",value:t,onChange:function(e){return n(e)}})]})})},g=n.p+"static/media/marvel.568d8c62.png",p=n.p+"static/media/kuro.cbe4521a.png",N=function(){return Object(f.jsxs)("div",{className:"level has-text-centered is-mobile mt-6",children:[Object(f.jsx)("div",{className:"level-left mt-6",children:Object(f.jsx)("div",{className:"level-item",children:Object(f.jsx)("img",{src:g,alt:"Logo de MARVEL",className:"image has-ratio",width:"125"})})}),Object(f.jsx)("div",{className:"level-right mt-6",children:Object(f.jsx)("div",{className:"level-item",children:Object(f.jsx)("img",{src:p,alt:"Logo de KuroDev",className:"image has-ratio",width:"67"})})})]})},S=n(2),y=n.n(S),w=n(7),B=n(10),I=n.n(B),k={ENDPOINT:"https://e-wallet-monopoly.herokuapp.com"},C=function(){var e,t,n=Object(m.useState)(Math.random().toString(36).substr(2,4)),a=Object(b.a)(n,2),c=a[0],r=a[1],s=Object(w.f)();(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.room.init)&&"bank"===JSON.parse(localStorage.getItem("user")).avatar?s.push("/monopoly-e-wallet/bank"):(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.room.init)&&s.push("/monopoly-e-wallet/game"),Object(m.useEffect)((function(){return o=I()(k.ENDPOINT),function(){o.off()}}),[]),Object(m.useEffect)((function(){o.on("joined",(function(e){y.a.getHtmlContainer()&&(e.quantity>=3&&y.a.enableButtons(),y.a.getHtmlContainer().innerHTML="Esperando jugadores. ".concat(e.quantity," persona").concat(1!==e.quantity?"s":""," se ha").concat(1!==e.quantity?"n":""," unido."))}))}),[]),Object(m.useEffect)((function(){o.on("person-join-left",(function(e){y.a.getHtmlContainer()&&(e.quantity>=3&&y.a.enableButtons(),y.a.getHtmlContainer().innerHTML="Esperando jugadores. ".concat(e.quantity," persona").concat(1!==e.quantity?"s":""," se ha").concat(1!==e.quantity?"n":""," unido."))}))}),[]),Object(m.useEffect)((function(){o.on("room-deleted",(function(){y.a.fire({title:"Se ha cerrado la sala.",confirmButtonText:"Aceptar"}),localStorage.removeItem("user")}))}),[]),Object(m.useEffect)((function(){o.on("game-begun",(function(){var e=JSON.parse(localStorage.getItem("user"));e.room.init=!0,localStorage.setItem("user",JSON.stringify(e)),y.a.close(),s.push("bank"===JSON.parse(localStorage.getItem("user")).avatar?"/monopoly-e-wallet/bank":"/monopoly-e-wallet/game")}))}),[]);var i=function(){return""!==c||(y.a.fire({title:"\xa1Debes introducir un nombre!",confirmButtonText:"Aceptar"}),!1)};return Object(f.jsxs)("section",{className:"section is-centered has-background-danger",style:{height:"100%"},children:[Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(x,{mb:"6"}),Object(f.jsx)(v,{name:c,onTextChange:function(e){return r(e.target.value)}}),Object(f.jsxs)("div",{className:"buttons is-centered mt-6 mb-6",children:[Object(f.jsx)(O,{text:"Crear",color:"primary",action:function(){i()&&o.emit("create-room",c.toUpperCase(),(function(e){var t=e.user;e.quantity,e.error;localStorage.setItem("user",JSON.stringify(t)),y.a.fire({title:"El c\xf3digo de la sala es: ".concat(t.room._id),text:"Esperando jugadores. 1 persona se ha unido.",confirmButtonColor:"#71945B",cancelButtonColor:"#B85B28",confirmButtonText:"Comenzar",cancelButtonText:"Cancelar",showCancelButton:!0,showConfirmButton:!0}).then((function(e){e.isConfirmed?y.a.fire({title:"\xbfEst\xe1 seguro que desea comenzar la partida?",confirmButtonColor:"#71945B",denyButtonColor:"#B85B28",confirmButtonText:"S\xed",denyButtonText:"No",showDenyButton:!0}).then((function(e){e.isConfirmed&&o.emit("begin-game",JSON.parse(localStorage.getItem("user")).room._id,(function(e){e&&y.a.fire({title:"Error: ".concat(e),icon:"warning"})}))})):e.isDismissed&&JSON.parse(localStorage.getItem("user"))})),y.a.showLoading(y.a.getDenyButton())}))},size:"large"}),Object(f.jsx)(O,{text:"Unirse",color:"link",action:function(){i()&&y.a.fire({title:"Introduzca el c\xf3digo de la sala: ",input:"text",inputAttributes:{value:"ldkj"}}).then((function(e){3!==e.value.length?y.a.fire({title:"Debe introducir un c\xf3digo v\xe1lido",confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"}):o.emit("join",{username:c.toUpperCase(),room_id:e.value},(function(t){var n=t.error,a=t.user,c=t.quantity;n?y.a.fire({title:"Error: ".concat(n),confirmButtonText:"Aceptar",icon:"warning"}):(localStorage.setItem("user",JSON.stringify(a)),y.a.fire({title:"El c\xf3digo de la sala es: ".concat(e.value.toUpperCase()),text:"Esperando jugadores. ".concat(c," persona").concat(1!==c?"s":""," se ha").concat(1!==c?"n":""," unido."),denyButtonColor:"#B85B28",denyButtonText:"Cancelar",showDenyButton:!0,showConfirmButton:!1}).then((function(e){e.isDenied&&o.emit("delete-user",a._id,(function(e){localStorage.removeItem("user")}))})),y.a.showLoading())}))}))},size:"large"})]}),Object(f.jsx)(N,{})]}),Object(f.jsx)("div",{className:"hero has-background-danger",children:Object(f.jsx)("div",{className:"hero-body"})})]})},E=(n(99),n(15)),T=n(8),J=n(4),_=n(6).FontAwesomeIcon,A=function(e){var t,n=e.username,o=e.avatar,a=e.amount,c=e.action,r=e.gameover,s=e.winner,i=e.winnerScreen;switch(o){case"bank":t=J.j;break;case"cat":t=J.e;break;case"dog":t=J.f;break;case"ship":t=J.o;break;case"car":t=J.d;break;case"university":t=J.p;break;default:t=J.k}return Object(f.jsxs)("div",{onClick:c,className:"card has-text-centered ".concat(!s&&i?"tint":void 0),style:r?{borderStyle:"solid",borderColor:"#C70000",borderWidth:"1em"}:s?{boxShadow:"0 0 0 0.75rem #f9ee23"}:void 0,children:[Object(f.jsx)("header",{className:"card-header is-size-4",children:Object(f.jsx)("div",{className:"card-header-title is-centered",children:Object(f.jsx)("div",{className:"has-background-warning pl-5 pr-5 pt-1 has-text-white",style:{borderRadius:"5px"},children:n})})}),Object(f.jsx)("div",{className:"card-image is-128x128 has-text-black is-size-1",children:Object(f.jsx)(_,{icon:t})}),Object(f.jsx)("footer",{className:"card-footer",children:Object(f.jsx)("p",{className:"card-footer-item has-text-black is-centered",children:a&&0!==a?"\u20a9 ".concat(a):0===a?"\xa1Quebrado!":void 0})})]})},q=function(e){var t=e.players,n=e.winner;return console.log(t),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"columns is-mobile is-centered has-text-centered mt-1 ",children:t.map((function(e,o){return n?e&&(0===o&&"bank"!==e.avatar||1===o||2===o&&"bank"===t[0].avatar)?Object(f.jsx)("div",{className:"column is-6",children:Object(f.jsx)(A,Object(T.a)(Object(T.a)({},e),{},{winner:n===e.username?n:void 0,winnerScreen:!0}))},o):void 0:e&&(0===o&&"bank"!==e.avatar||1===o||2===o&&"bank"===t[0].avatar)?Object(f.jsx)("div",{className:"column is-6",children:Object(f.jsx)(A,Object(T.a)({},e))},o):Object(f.jsx)("div",{})}))}),Object(f.jsx)("div",{className:"columns is-mobile is-half is-centered has-text-centered",children:t.map((function(e,o){return n?2===o&&"bank"!==t[0].avatar||3===o||4===o?Object(f.jsx)("div",{className:"column is-6",children:Object(f.jsx)(A,Object(T.a)(Object(T.a)({},e),{},{winner:n===e.username?n:void 0,winnerScreen:!0}))},o):void 0:2===o&&"bank"!==t[0].avatar||3===o||4===o?Object(f.jsx)("div",{className:"column is-6",children:Object(f.jsx)(A,Object(T.a)({},e))},o):Object(f.jsx)("div",{})}))})]})},D=n(6),z=n(11),P=n(21),F=function(){var e=Object(w.f)(),t=Object(m.useState)(JSON.parse(localStorage.getItem("user"))),n=Object(b.a)(t,2),o=n[0],c=n[1],r=Object(m.useState)([]),s=Object(b.a)(r,2),i=s[0],l=s[1],u=Object(m.useState)(!0),d=Object(b.a)(u,2),j=d[0],h=d[1];o?"bank"===o.avatar&&e.push("/monopoly-e-wallet/bank"):e.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){a=I()(k.ENDPOINT);var e=JSON.parse(localStorage.getItem("user"));return a.emit("join",{username:e.username,room_id:e.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){a.off()}}),[]);var v=function(){y.a.fire({title:"\xa1Esta persona est\xe1 quebrada!",confirmButtonText:"Esito"})},g=function(e){var t=e.toString()[0],n=e.toString().substr(1).length;return t.concat("0".repeat(n))};Object(m.useEffect)((function(){a.emit("get-users",null===o||void 0===o?void 0:o.room._id,(function(e){e=e.map((function(e){return{username:e.username,avatar:e.avatar,amount:e.username===o.username?e.amount:"~".concat(g(e.amount)),action:JSON.parse(localStorage.getItem("user")).username===e.username?p:0===e.amount?v:function(){return N(e.username)}}})),l(e),h(!1)}))}),[]),Object(m.useEffect)((function(){a.on("transaction",(function(e){var t=JSON.parse(localStorage.getItem("user"));e.to_user===t.username&&z.b.dark("".concat(e.username," te ha enviado \u20a9").concat(e.amount)),t.amount+=e.amount,localStorage.setItem("user",JSON.stringify(t))}))}),[]),Object(m.useEffect)((function(){a.on("debit",(function(e){var t=JSON.parse(localStorage.getItem("user"));e.to_user===t.username&&(z.b.dark("El banco te ha cobrado \u20a9".concat(e.amount)),t.amount-=e.amount,localStorage.setItem("user",JSON.stringify(t)))}))}),[]),Object(m.useEffect)((function(){a.on("bankrupted",(function(e){z.b.dark("\xa1".concat(e," ha quebrado!"))}))}),[]),Object(m.useEffect)((function(){a.on("winner-player",(function(t){e.push("/monopoly-e-wallet/winner/".concat(t.username))}))}),[]),Object(m.useEffect)((function(){a.on("users-list",(function(e){console.log(e),c(e.find((function(e){return e._id==JSON.parse(localStorage.getItem("user"))._id}))),localStorage.setItem("user",JSON.stringify(o)),e=e.map((function(e){return{username:e.username,avatar:e.avatar,amount:e.username===o.username?e.amount:"~".concat(g(e.amount)),action:JSON.parse(localStorage.getItem("user")).username===e.username?p:function(){return N(e.username)}}})),l(e)}))}),[]);var p=function(){y.a.fire({title:0!==o.amount?"Su saldo es \u20a9".concat(o.amount):"Est\xe1s en la quiebra.",confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"})},N=function(t){0!==o.amount?e.push("/monopoly-e-wallet/send/".concat(t)):y.a.fire({title:"\xa1Est\xe1s quebrado! No puedes enviar dinero.",confirmButtonText:"Chale"})};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(x,{}),Object(f.jsx)("div",{className:"box is-centered has-text-centered",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:100,visibility:j?"visible":"hidden"},children:Object(f.jsx)(P.ClapSpinner,{loading:j})}),Object(f.jsx)("div",{style:{visibility:j?"hidden":"visible"},children:Object(f.jsx)(q,{players:i},"0")}),Object(f.jsxs)("div",{className:"columns is-mobile is-half is-centered has-text-centered",style:{visibility:j?"hidden":"visible"},children:[Object(f.jsx)(O,{action:function(){localStorage.removeItem("user"),e.push("/monopoly-e-wallet/")},text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.b})}),Object(f.jsx)("div",{className:"column is-12",children:Object(f.jsx)("div",{className:"box is-size-1 has-text-black",onClick:0!==o.amount?function(){return e.push("/monopoly-e-wallet/bankrupt")}:function(){localStorage.removeItem("user"),e.push("/monopoly-e-wallet/")},children:Object(f.jsx)(D.FontAwesomeIcon,{icon:0!==o.amount?J.m:J.h})})})]})]})})},L=function(e){var t=e.number,n=e.action;return Object(f.jsx)("div",{className:"column is-4",children:Object(f.jsx)("div",{onClick:function(e){return n(e)},className:"button is-large has-background-warning has-text-white",value:t,children:t})})},H=function(e){var t=e.onKeyPress;return Object(f.jsx)("div",{className:"columns is-mobile is-3 is-centered has-text-centered",children:Object(f.jsxs)("div",{className:"box has-background-success is-centered has-text-centered is-6",children:[Object(f.jsxs)("div",{className:"columns is-mobile  is-centered",children:[Object(f.jsx)(L,{number:"1",action:function(e,n){return t(e,"1")}}),Object(f.jsx)(L,{number:"2",action:function(e,n){return t(e,"2")}}),Object(f.jsx)(L,{number:"3",action:function(e,n){return t(e,"3")}})]}),Object(f.jsxs)("div",{className:"columns is-mobile  ",children:[Object(f.jsx)(L,{number:"4",action:function(e,n){return t(e,"4")}}),Object(f.jsx)(L,{number:"5",action:function(e,n){return t(e,"5")}}),Object(f.jsx)(L,{number:"6",action:function(e,n){return t(e,"6")}})]}),Object(f.jsxs)("div",{className:"columns is-mobile  ",children:[Object(f.jsx)(L,{number:"7",action:function(e,n){return t(e,"7")}}),Object(f.jsx)(L,{number:"8",action:function(e,n){return t(e,"8")}}),Object(f.jsx)(L,{number:"9",action:function(e,n){return t(e,"9")}})]}),Object(f.jsxs)("div",{className:"columns is-mobile  ",children:[Object(f.jsx)(L,{number:".",action:function(e,n){return t(e,".")}}),Object(f.jsx)(L,{number:"0",action:function(e,n){return t(e,"0")}}),Object(f.jsx)(L,{number:"x",action:function(e,n){return t(e,"x")}})]})]})})},U=function(e){var t=e.leftButton,n=e.rightButton;return Object(f.jsxs)("div",{className:"level is-mobile has-text-black mt-4",children:[Object(f.jsx)("div",{className:"level-item",children:t?Object(f.jsx)("div",{className:"level-left",children:Object(f.jsx)(O,{text:t.text,color:"warning",size:"large",action:t.action})}):void 0}),n?Object(f.jsx)("div",{className:"level-item",children:Object(f.jsx)("div",{className:"level-right",children:Object(f.jsx)(O,{text:n.text,color:"link",size:"large",action:n.action})})}):void 0]})},R=(n(57),function(){var e=Object(w.f)();JSON.parse(localStorage.getItem("user"))||e.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){return c=Object(B.io)(k.ENDPOINT),function(){c.off()}}),[]);var t=Object(w.g)(),n=t.user,o=t.bank,a=Object(m.useState)(""),r=Object(b.a)(a,2),s=r[0],i=r[1],l=Object(m.useState)(!1),u=Object(b.a)(l,2),d=u[0],j=u[1],O=Object(m.useState)(0),h=Object(b.a)(O,2),v=h[0],g=h[1],p=function(e){var t="".concat(s).concat(e);i(t)},N=function(e,t){switch(t){case".":0!==s.length||d?d||(p("."),j(!0)):(p("0."),j(!0));break;case"x":i(""),j(!1),g(0);break;default:d?v<2&&(p(t),g(v+1)):p(t)}},S=function(){return e.push(o?"/monopoly-e-wallet/bank":"/monopoly-e-wallet/game")},I={leftButton:{text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.c}),action:S},rightButton:{text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.g}),action:function(){!o&&s>JSON.parse(localStorage.getItem("user")).amount?y.a.fire("te falta cobre"):0!==s.length?y.a.fire({title:"\xbfEnviarle \u20a9".concat(s," a ").concat(n,"?"),confirmButtonColor:"#71945B",cancelButtonColor:"#B85B28",confirmButtonText:"S\xed",cancelButtonText:"No",showCancelButton:!0}).then((function(e){e.isConfirmed&&(c.emit("send-transaction",{user_id:JSON.parse(localStorage.getItem("user"))._id,amount:s,room_id:JSON.parse(localStorage.getItem("user")).room._id,to_user:n}),y.a.fire({title:"Enviaste \u20a9".concat(s," a ").concat(n),confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"}),setTimeout((function(){return S()}),500))})):z.b.error("Introduzca el monto a enviar",{position:"top-right",autoClose:3500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0})}}};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(x,{mb:"1"}),Object(f.jsxs)("div",{className:"level is-mobile has-text-black",children:[Object(f.jsx)("div",{className:"level-item",children:Object(f.jsxs)("div",{className:"level-left",children:[Object(f.jsx)("strong",{className:"mr-2",children:"Enviando a:"})," ",n]})}),Object(f.jsx)("div",{className:"level-item",children:Object(f.jsxs)("div",{className:"level-right",children:[Object(f.jsx)("strong",{className:"mr-2",children:o?"Saldo de ".concat(n,":"):"Tu saldo es:"})," ","\u20a9","1.000"]})})]}),Object(f.jsx)("div",{className:"columns is-mobile is-centered is-half mb-3",children:Object(f.jsx)("div",{className:"column is-two-thirds",children:Object(f.jsx)("input",{className:"input is-size-2",value:"\u20a9 ".concat(s),readOnly:!0})})}),Object(f.jsx)(H,{onKeyPress:function(e,t){return N(0,t)}}),Object(f.jsx)(U,Object(T.a)({},I))]})})}),W=function(){var e=Object(m.useState)([]),t=Object(b.a)(e,2),n=t[0],o=t[1],a=Object(m.useState)(!0),c=Object(b.a)(a,2),s=c[0],i=c[1],l=Object(w.f)(),u=JSON.parse(localStorage.getItem("user"));u||l.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){r=Object(B.io)(k.ENDPOINT);var e=JSON.parse(localStorage.getItem("user"));return r.emit("join",{username:e.username,room_id:e.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){r.off()}}),[]),Object(m.useEffect)((function(){r.emit("get-users",null===u||void 0===u?void 0:u.room._id,(function(e){e=e.filter((function(e){return e.username!==u.username})).map((function(e){return{username:e.username,avatar:"bank"===e.avatar?"university":e.avatar,action:0!==e.amount||"bank"===e.avatar?function(){return d(e.username)}:function(){return y.a.fire({title:"Esta persona est\xe1 quebrada.",confirmButtonText:"Chale"})}}})),o(e),i(!1)}))}),[]);var d=function(e){y.a.fire({title:"\xbfEst\xe1s seguro que te quebr\xf3 ".concat(e,"?"),confirmButtonColor:"#71945B",cancelButtonColor:"#B85B28",confirmButtonText:"S\xed",cancelButtonText:"No",showCancelButton:!0}).then((function(t){t.isConfirmed&&(r.emit("send-transaction",{user_id:JSON.parse(localStorage.getItem("user"))._id,amount:JSON.parse(localStorage.getItem("user")).amount,room_id:JSON.parse(localStorage.getItem("user")).room._id,to_user:e},(function(e){e&&l.push("/monopoly-e-wallet/winner/".concat(e))})),u.amount=0,localStorage.setItem("user",JSON.stringify(u)),y.a.fire({title:"\xa1Te fuiste a la quiebra!",confirmButtonText:"Chale"}),setTimeout((function(){return l.push("/monopoly-e-wallet/game/",1e3)})))}))},j={leftButton:{text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.c}),action:function(){return l.push("/monopoly-e-wallet/game/")}}};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container has-text-black has-text-centered",children:[Object(f.jsx)("div",{className:"box is-centered has-text-centered",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:100,visibility:s?"visible":"hidden"},children:Object(f.jsx)(P.ClapSpinner,{loading:s})}),Object(f.jsx)(x,{mb:"2"}),Object(f.jsx)("h1",{class:"title is-3",style:{marginBottom:"-0.5rem"},children:"\xbfQui\xe9n te llev\xf3 a la bancarrota?"}),Object(f.jsxs)("div",{style:{visibility:s?"hidden":"visible"},children:[Object(f.jsx)(q,{players:n}),Object(f.jsx)(U,Object(T.a)({},j))]})]})})},M=function(){var e=Object(m.useState)(!0),t=Object(b.a)(e,2),n=t[0],o=t[1],a=Object(w.f)(),c=JSON.parse(localStorage.getItem("user"));c?"bank"!==c.avatar&&a.push("/monopoly-e-wallet/game"):a.push("/monopoly-e-wallet/");var r=Object(m.useState)([]),i=Object(b.a)(r,2),l=i[0],u=i[1];Object(m.useEffect)((function(){s=Object(B.io)(k.ENDPOINT);var e=JSON.parse(localStorage.getItem("user"));return s.emit("join",{username:e.username,room_id:e.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){s.off()}}),[]),Object(m.useEffect)((function(){s.on("transaction",(function(e){z.b.dark("".concat(e.username," le ha enviado \u20a9").concat(e.amount," a ").concat(e.to_user))}))}),[]),Object(m.useEffect)((function(){s.on("bankrupted",(function(e){z.b.dark("\xa1".concat(e," ha quebrado!"))}))}),[]),Object(m.useEffect)((function(){s.on("winner-player",(function(e){a.push("/monopoly-e-wallet/winner/".concat(e.username))}))}),[]);var d=function(){s.emit("get-users",null===c||void 0===c?void 0:c.room._id,(function(e){e=e.map((function(e){return{username:e.username,avatar:e.avatar,amount:e.amount,action:function(){return j(e.username)}}})),u(e),o(!1)}))};Object(m.useEffect)((function(){d()}),[]),Object(m.useEffect)((function(){s.on("users-list",(function(e){console.log(e),e=e.map((function(e){return{username:e.username,avatar:e.avatar,amount:e.amount,action:0!==e.amount?function(){return j(e.username)}:function(){return y.a.fire({title:"\xa1Este jugador est\xe1 quebrado!",confirmButtonText:"Chale"})}}})),u(e)}))}),[]);var j=function(e){y.a.fire({title:"\xbfQue quieres hacer?",showCloseButton:!0,showDenyButton:!0,showCancelButton:!0,denyButtonColor:"#B85B28",confirmButtonText:"Pass Go",denyButtonText:"Cobrar",cancelButtonText:"Pagar"}).then((function(t){t.isConfirmed?(s.emit("send-transaction",{user_id:JSON.parse(localStorage.getItem("user"))._id,amount:200,room_id:JSON.parse(localStorage.getItem("user")).room._id,to_user:e}),y.a.fire({title:"Pass Go enviado a ".concat(e),confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"}),d()):t.isDenied?h(e):t.isDismissed&&v(e)}))},h=function(e){a.push("/monopoly-e-wallet/withdraw/".concat(e))},v=function(e){a.push("/monopoly-e-wallet/send/".concat(e,"/t"))},g={leftButton:{text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.a}),action:function(){a.push("/monopoly-e-wallet/history/")}},rightButton:{text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.i}),action:function(){y.a.fire({title:"\xbfEst\xe1s seguro de que quieres finalizar?",confirmButtonColor:"#71945B",confirmButtonText:"S\xed",cancelButtonColor:"#B85B28",cancelButtonText:"No",showCancelButton:!0}).then((function(e){e.isConfirmed&&y.a.fire({title:"Esperando confirmaci\xf3n.",confirmButtonColor:"#71945B",confirmButtonText:"S\xed",cancelButtonColor:"#B85B28",cancelButtonText:"No",showCancelButton:!0}).then((function(e){e.isConfirmed?(y.a.fire({title:"Partida finalizada con \xe9xito",confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"}),a.push("/monopoly-e-wallet/winner")):e.isDismissed&&y.a.fire({title:"\xa1Han rechazado el fin del juego!",confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"})}))}))}}};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(x,{}),Object(f.jsx)("div",{className:"box is-centered has-text-centered",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:100,visibility:n?"visible":"hidden"},children:Object(f.jsx)(P.ClapSpinner,{loading:n})}),Object(f.jsxs)("div",{style:{visibility:n?"hidden":"visible"},children:[Object(f.jsx)(O,{action:function(){localStorage.removeItem("user"),a.push("/monopoly-e-wallet/")},text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.b})}),Object(f.jsx)(q,{players:l}),Object(f.jsx)(U,Object(T.a)({},g))]})]})})},G=function(){var e=Object(w.f)();JSON.parse(localStorage.getItem("user"))||e.push("/monopoly-e-wallet/");return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container is-centered has-text-centered",children:[Object(f.jsx)(x,{mb:"2"}),Object(f.jsx)("h1",{className:"title is-2",children:"FIN DEL JUEGO"}),Object(f.jsx)("h1",{className:"title is-3",children:"Te quebr\xf3 ANYI"}),Object(f.jsx)(A,{playerName:"ANYI",token:"http://placekitten.com/128/129",amount:"null",gameover:!0}),Object(f.jsx)("button",{className:"button is-rounded is-large mt-5",onClick:function(){e.push("/monopoly-e-wallet/")},children:Object(f.jsx)("span",{className:"icon is-medium",children:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.h})})})]})})},K=function(){var e=Object(w.f)(),t=Object(m.useState)(JSON.parse(localStorage.getItem("user"))),n=Object(b.a)(t,2),o=n[0],a=(n[1],Object(m.useState)([])),c=Object(b.a)(a,2),r=c[0],s=c[1],l=Object(w.g)().winner;o||e.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){console.log("conecte"),i=Object(B.io)(k.ENDPOINT);var e=JSON.parse(localStorage.getItem("user"));return i.emit("join",{username:e.username,room_id:e.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){i.off()}}),[]),Object(m.useEffect)((function(){i.emit("get-users",null===o||void 0===o?void 0:o.room._id,(function(e){e=e.map((function(e){return{username:e.username,avatar:e.avatar,amount:e.amount}})),s(e)}))}),[]);var u={leftButton:{text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.h}),action:function(){localStorage.removeItem("user"),e.push("/monopoly-e-wallet/")}}};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container is-centered has-text-centered",children:[Object(f.jsx)(x,{mb:"2"}),Object(f.jsx)("h1",{className:"title is-2",children:"FIN DEL JUEGO"}),Object(f.jsxs)("h1",{className:"title is-3",children:[l," es el ganador"]}),Object(f.jsx)(q,{players:r,winner:l}),Object(f.jsx)(U,Object(T.a)({},u))]})})},Q=function(){var e=Object(w.f)(),t=Object(m.useState)(""),n=Object(b.a)(t,2),o=n[0],a=n[1],c=Object(m.useState)(!1),r=Object(b.a)(c,2),s=r[0],i=r[1],u=Object(m.useState)(0),d=Object(b.a)(u,2),j=d[0],O=d[1];JSON.parse(localStorage.getItem("user"))||e.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){l=Object(B.io)(k.ENDPOINT);var e=JSON.parse(localStorage.getItem("user"));return l.emit("join",{username:e.username,room_id:e.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){l.off()}}),[]);var h=Object(w.g)().user,v=function(e){var t="".concat(o).concat(e);a(t)},g=function(e,t){switch(t){case".":0!==o.length||s?s||(v("."),i(!0)):(v("0."),i(!0));break;case"x":a(""),i(!1),O(0);break;default:s?j<2&&(v(t),O(j+1)):v(t)}},p=function(){return e.push("/monopoly-e-wallet/bank")},N={leftButton:{text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.c}),action:p},rightButton:{text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.n}),action:function(){0!==o.length?y.a.fire({title:"\xbfCobrarle \u20a9".concat(o," a ").concat(h,"?"),confirmButtonColor:"#71945B",cancelButtonColor:"#B85B28",confirmButtonText:"S\xed",cancelButtonText:"No",showCancelButton:!0}).then((function(e){e.isConfirmed&&(l.emit("bank-debit",{user_id:JSON.parse(localStorage.getItem("user"))._id,amount:o,room_id:JSON.parse(localStorage.getItem("user")).room._id,to_user:h}),y.a.fire({title:"Cobraste \u20a9".concat(o," a ").concat(h),confirmButtonColor:"#71945B",confirmButtonText:"Aceptar"}),setTimeout((function(){return p()}),500),p())})):z.b.error("Introduzca el monto a cobrar",{position:"top-right",autoClose:3500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0})}}};return Object(f.jsx)("section",{className:"section is-centered",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(x,{mb:"1"}),Object(f.jsxs)("div",{className:"level is-mobile has-text-black",children:[Object(f.jsx)("div",{className:"level-item",children:Object(f.jsxs)("div",{className:"level-left",children:[Object(f.jsx)("strong",{className:"mr-2",children:"Cobrando a:"})," ",h]})}),Object(f.jsx)("div",{className:"level-item",children:Object(f.jsxs)("div",{className:"level-right",children:[Object(f.jsxs)("strong",{className:"mr-2",children:["Saldo de ",h,":"]})," \u20a9","1.000"]})})]}),Object(f.jsx)("div",{className:"columns is-mobile is-centered is-half mb-3",children:Object(f.jsx)("div",{className:"column is-two-thirds",children:Object(f.jsx)("input",{className:"input is-size-2 has-text-centered",value:"\u20a9 ".concat(o),readOnly:!0})})}),Object(f.jsx)(H,{onKeyPress:function(e,t){return g(0,t)}}),Object(f.jsx)(U,Object(T.a)({},N))]})})},V=function(e){var t=e.transactions;return Object(f.jsxs)("table",{className:"table is-small",style:{marginLeft:"auto",marginRight:"auto"},children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Tipo"}),Object(f.jsx)("th",{children:"Envi\xf3"}),Object(f.jsx)("th",{children:"Recibi\xf3"}),Object(f.jsx)("th",{children:"Monto"}),Object(f.jsx)("th",{children:"Hora"})]})}),Object(f.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.type}),Object(f.jsx)("td",{children:e.sender}),Object(f.jsx)("td",{children:e.receiver}),Object(f.jsxs)("td",{children:["\u20a9",e.amount]}),Object(f.jsx)("td",{children:e.hour})]})}))})]})},Y=function(){var e=Object(w.f)(),t=Object(m.useState)([]),n=Object(b.a)(t,2),o=n[0],a=n[1],c=Object(m.useState)(!0),r=Object(b.a)(c,2),s=r[0],i=r[1],l=JSON.parse(localStorage.getItem("user"));l?"bank"!==l.avatar&&e.push("/monopoly-e-wallet/game"):e.push("/monopoly-e-wallet/"),Object(m.useEffect)((function(){u=Object(B.io)(k.ENDPOINT);var e=JSON.parse(localStorage.getItem("user"));return u.emit("join",{username:e.username,room_id:e.room._id},(function(e){e.error;var t=e.user;e.quantity;t&&localStorage.setItem("user",JSON.stringify(t))})),function(){u.off()}}),[]),Object(m.useEffect)((function(){u.emit("get-transactions",l.room._id,(function(e){e=e.map((function(e,t){return{type:"e"===e.type?"Env\xedo":"Cobro",sender:e.username,receiver:e.to_user,amount:e.amount,hour:e.createdAt}})),a(e),i(!1)}))}),[]);var d={leftButton:{text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.c}),action:function(){return e.push("/monopoly-e-wallet/bank")}},rightButton:{text:Object(f.jsx)(D.FontAwesomeIcon,{icon:J.l}),action:function(){return y.a.fire({title:"Team MARVEL - I Reto Interno KURODev",text:"Albert Acevedo, Gabriel Roa, Jonathan Calles",icon:"success"})}}};return Object(f.jsx)("section",{className:"section is-centered has-text-centered",children:Object(f.jsxs)("div",{className:"container is-centered has-text-centered",children:[Object(f.jsx)(x,{mb:"0"}),Object(f.jsx)("div",{className:"box is-centered has-text-centered",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:100,visibility:s?"visible":"hidden"},children:Object(f.jsx)(P.ClapSpinner,{loading:s})}),Object(f.jsxs)("div",{className:"is-centered has-text-centered",style:{visibility:s?"hidden":"visible"},children:[Object(f.jsx)(U,Object(T.a)({},d)),Object(f.jsx)(V,{transactions:o})]})]})})};var $=function(){return Object(f.jsxs)(E.a,{children:[Object(f.jsxs)(w.c,{children:[Object(f.jsx)(w.a,{exact:!0,path:"/monopoly-e-wallet/",children:Object(f.jsx)(C,{})}),Object(f.jsx)(w.a,{path:"/monopoly-e-wallet/game/",children:Object(f.jsx)(F,{})}),Object(f.jsx)(w.a,{path:"/monopoly-e-wallet/send/:user/:bank?",children:Object(f.jsx)(R,{})}),Object(f.jsx)(w.a,{path:"/monopoly-e-wallet/bankrupt/",children:Object(f.jsx)(W,{})}),Object(f.jsx)(w.a,{path:"/monopoly-e-wallet/bank/",children:Object(f.jsx)(M,{})}),Object(f.jsx)(w.a,{path:"/monopoly-e-wallet/gameover/",children:Object(f.jsx)(G,{})}),Object(f.jsx)(w.a,{path:"/monopoly-e-wallet/winner/:winner",children:Object(f.jsx)(K,{})}),Object(f.jsx)(w.a,{path:"/monopoly-e-wallet/withdraw/:user",children:Object(f.jsx)(Q,{})}),Object(f.jsx)(w.a,{path:"/monopoly-e-wallet/history/",children:Object(f.jsx)(Y,{})})]}),Object(f.jsx)(z.a,{})]})},X=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}j.a.render(Object(f.jsx)($,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/monopoly-e-wallet",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/monopoly-e-wallet","/service-worker.js");X?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Z(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Z(t,e)}))}}()},99:function(e,t,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.a8c6645f.chunk.js.map